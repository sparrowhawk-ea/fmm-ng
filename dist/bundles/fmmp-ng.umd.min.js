!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@fmmp/core")):"function"==typeof define&&define.amd?define("@fmmp/ng",["exports","@angular/core","rxjs","@fmmp/core"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).fmmp=t.fmmp||{},t.fmmp.ng={}),t.ng.core,t.rxjs,t["@fmmp/core"])}(this,(function(t,e,n,r){"use strict";var i=function(){function t(t){this.verbosity=0,this.update=new e.EventEmitter;for(var n=t.nativeElement;n&&"FORM"!==n.tagName;)n=n.parentElement;this.form=n}return t.prototype.ngOnChanges=function(){this.minimap&&(this.key!==this.previousKey?(this.minimap.destructor(),this.ngOnInit()):(this.store.namelessControls=this.namelessControls,this.minimap.compose(this.customWidgetIds)))},t.prototype.ngOnDestroy=function(){this.minimap&&(this.minimap.detach(),this.store=void 0)},t.prototype.ngOnInit=function(){var t=this,e={aggregateLabels:this.aggregateLabels,anchor:this.anchor,debounceMsec:this.debounceMsec,dynamicLabels:this.dynamicLabels,form:this.form,framework:this.framework,onUpdate:function(e){return t.update.next(e)},page:this.page,store:this.store=new m(this.formGroup),title:this.title,usePanelDetail:void 0!==this.usePanelDetail,useWidthToScale:void 0!==this.useWidthToScale,verbosity:this.verbosity,widgetFactories:this.widgetFactories},n=this.panel?p.PANELMAP.get(this.panel):void 0;this.minimap=null==n?void 0:n.createMinimap(e),this.previousKey=this.key,this.ngOnChanges()},t.prototype.takeSnapshot=function(){var t;return null===(t=this.minimap)||void 0===t?void 0:t.takeSnapshot()},t}();i.decorators=[{type:e.Component,args:[{selector:"fmm-ng-minimap",template:""}]}],i.ctorParameters=function(){return[{type:e.ElementRef}]},i.propDecorators={aggregateLabels:[{type:e.Input}],anchor:[{type:e.Input}],debounceMsec:[{type:e.Input}],dynamicLabels:[{type:e.Input}],formGroup:[{type:e.Input}],framework:[{type:e.Input}],page:[{type:e.Input}],panel:[{type:e.Input}],title:[{type:e.Input}],usePanelDetail:[{type:e.Input}],useWidthToScale:[{type:e.Input}],verbosity:[{type:e.Input}],widgetFactories:[{type:e.Input}],customWidgetIds:[{type:e.Input}],key:[{type:e.Input}],namelessControls:[{type:e.Input}],update:[{type:e.Output}]};var o=function(){function t(t){this.hostRef=t,this.ef=new a(t)}return t.prototype.ngOnDestroy=function(){this.minimapPanel.destructor(),p.PANELMAP.delete(this),this.minimapPanel=void 0},t.prototype.ngOnInit=function(){var t=this.hostRef.nativeElement,e=void 0!==this.vertical;this.minimapPanel=r.Fmm.createPanel(this.ef,t,this.detailParent,e),p.PANELMAP.set(this,this.minimapPanel)},t.prototype.destroyDetached=function(){var t;return null===(t=this.minimapPanel)||void 0===t?void 0:t.destroyDetached()},t}();o.decorators=[{type:e.Component,args:[{selector:"fmm-ng-panel",template:""}]}],o.ctorParameters=function(){return[{type:e.ElementRef}]},o.propDecorators={detailParent:[{type:e.Input}],vertical:[{type:e.Input}]};var s=function(){};s.decorators=[{type:e.NgModule,args:[{declarations:[i,o],exports:[i,o]}]}];var a=function(){function t(t){var e;if(void 0!==Element.prototype.getAttributeNames)for(var n=t.nativeElement;n&&!e;n=n.parentElement){e=n.getAttributeNames().find((function(t){return t.startsWith("_ngcontent-")}))}else for(n=t.nativeElement;n&&!e;n=n.parentElement){e=Array.prototype.map.call(n.attributes,(function(t){return t.name})).find((function(t){return t.startsWith("_ngcontent-")}))}if(!e)throw new Error("FormMinimap: missing _ngcontent- attribute");this.ngContentAttribute=e}return t.prototype.createElement=function(t){var e=document.createElement(t);return e.setAttribute(this.ngContentAttribute,""),e},t.prototype.createElementNS=function(t,e){var n=document.createElementNS(t,e);return n.setAttribute(this.ngContentAttribute,""),n},t}(),p={PANELMAP:new WeakMap},u=function(){function t(t,e,r,i){this.name=r,this.control=i,this.se="SELECT"===t.tagName?t:void 0;var o=new n.Subscription;o.add(this.control.statusChanges.subscribe(e)),o.add(this.control.valueChanges.subscribe(e)),this.destructor=function(){return o.unsubscribe()}}return t.prototype.destructor=function(){},t.prototype.getError=function(t){var e=this.control.errors,n=e?Object.keys(e):[];return t&&n.length&&(n=n.filter((function(t){return"required"!==t}))),n.length?n.join(","):void 0},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){var t=this.control.value;if(t){if(!this.se)return t;if(!this.se.multiple)return[this.se.selectedIndex];var e=[];return Array.from(this.se.options).forEach((function(t,n){return t.selected&&e.push(n)})),e}},t.prototype.isDisabled=function(){return this.control.disabled},t}(),m=function(){function t(t){var e=this;this.formGroup=t,this.namelessControls={},this.minimaps=new Set,this.listener=function(){return e.minimaps.forEach((function(t){return t.takeSnapshot()}))}}return t.prototype.createStoreItem=function(t,e){var n=t.getAttribute("name")||t.id,r=n?this.namelessControls[n]:void 0;if(r)return new u(t,this.listener,n,r);for(var i,o=!1,s=t;s&&"FORM"!==s.tagName&&!(i=s.getAttribute("formcontrolname")||s.dataset.formcontrolname)&&!(o=void 0!==s.dataset.fmminformarray);s=s.parentElement);for(var a=null==s?void 0:s.parentElement;a&&"FORM"!==a.tagName;a=a.parentElement){var p=a.getAttribute("formarrayname");p?o?(o=!1,i=p):i=p+"."+i:(p=a.getAttribute("formgroupname"))&&(i=p+"."+i)}var m=this.formGroup.get(i);return m?new u(t,this.listener,i,m):void 0},t.prototype.notifyMinimap=function(t,e){e?this.minimaps.add(t):this.minimaps.delete(t)},t}();t.FmmNgMinimap=i,t.FmmNgModule=s,t.FmmNgPanel=o,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=fmmp-ng.umd.min.js.map